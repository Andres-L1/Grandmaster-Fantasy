import{d as Ce,f as y,a as p,s as $}from"../chunks/BsqHtaxl.js";import{B as ie,C as Pe,f as de,D as ce,E as ne,F as k,G as Le,p as Me,t as G,k as t,a as Se,e as je,s as n,c as l,$ as Ee,r,n as te,H as h,o as se,I as z,J as re}from"../chunks/C-CuM6pP.js";import{i as P}from"../chunks/xfEZ9bAT.js";import{e as Ie,t as Ve}from"../chunks/CjOUthVX.js";import{h as qe,p as Ae,a as Be,c as le}from"../chunks/ZS60C01Y.js";import{r as oe,u as Fe}from"../chunks/KAUJ8UjT.js";import{s as Te,C as De}from"../chunks/IXFYcp_f.js";import{s as Ge,a as H}from"../chunks/DUl5GAGU.js";function ze(e,o,m=o){var d=new WeakSet;ie(e,"input",async u=>{var i=u?e.defaultValue:e.value;if(i=J(e)?N(i):i,m(i),k!==null&&d.add(k),await Pe(),i!==(i=o())){var C=e.selectionStart,x=e.selectionEnd,g=e.value.length;if(e.value=i??"",x!==null){var c=e.value.length;C===x&&x===g&&c>g?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=C,e.selectionEnd=Math.min(x,c))}}}),(ne&&e.defaultValue!==e.value||de(o)==null&&e.value)&&(m(J(e)?N(e.value):e.value),k!==null&&d.add(k)),ce(()=>{var u=o();if(e===document.activeElement){var i=Le??k;if(d.has(i))return}J(e)&&u===N(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function He(e,o,m=o){ie(e,"change",d=>{var u=d?e.defaultChecked:e.checked;m(u)}),(ne&&e.defaultChecked!==e.checked||de(o)==null)&&m(e.checked),ce(()=>{var d=o();e.checked=!!d})}function J(e){var o=e.type;return o==="number"||o==="range"}function N(e){return e===""?null:+e}var Je=y('<div class="flex items-center gap-2 bg-slate-900 px-2 py-1 rounded-lg"><button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">←</button> <span class="text-xs font-mono text-slate-500"> </span> <button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">→</button></div>'),Ne=y('<div class="py-20 text-center text-slate-500 animate-pulse">Cargando base de datos de jugadores...</div>'),Oe=y('<div class="w-full aspect-[2/3] rounded-xl border border-slate-800 bg-slate-900/50 flex flex-col items-center justify-center grayscale opacity-40 hover:opacity-100 transition-opacity"><div class="text-4xl mb-2 text-slate-700">?</div> <div class="text-xs text-slate-600 font-bold uppercase"> </div></div>'),Qe=y('<div class="relative group perspective"><!></div>'),Re=y('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>'),We=y('<div class="py-20 text-center text-slate-500">No se encontraron cartas con ese criterio.</div>'),Ke=y('<div class="space-y-8"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 flex flex-col md:flex-row justify-between items-center gap-6"><div><h1 class="text-3xl font-bold font-serif text-white">Tu Álbum</h1> <p class="text-slate-400">Completa la colección de los 500 mejores.</p></div> <div class="flex items-center gap-8"><div class="text-center"><div class="text-3xl font-mono font-bold text-amber-400"> <span class="text-slate-500 text-lg"> </span></div> <div class="text-xs uppercase tracking-widest text-slate-500">Cartas</div></div> <div class="w-48 h-4 bg-slate-800 rounded-full overflow-hidden border border-white/10"><div class="h-full bg-gradient-to-r from-amber-600 to-yellow-400 transition-all duration-1000"></div></div> <div class="font-mono text-sm text-amber-400"> </div></div></div> <div class="flex flex-col md:flex-row justify-between gap-4"><input type="text" placeholder="Buscar jugador..." class="bg-slate-900 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50 w-full md:w-64"/> <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-slate-300 cursor-pointer"><input type="checkbox" class="rounded bg-slate-800 border-white/10 text-amber-500 focus:ring-amber-500/50"/> Mostrar Faltantes</label> <!></div></div> <!> <!></div>');function ra(e,o){Me(o,!0);const m=()=>H(Be,"$allPlayers",i),d=()=>H(le,"$collectionIds",i),u=()=>H(Ae,"$playersLoading",i),[i,C]=Ge();let x=z(!0),g=z(""),c=z(1);const L=20;let M=h(()=>{let a=m();if(t(g)){const s=t(g).toLowerCase();a=a.filter(v=>v.name.toLowerCase().includes(s)||v.username.toLowerCase().includes(s))}return t(x)||(a=a.filter(s=>d().includes(s.id))),a}),ve=h(()=>t(M).slice((t(c)-1)*L,t(c)*L)),S=h(()=>Math.ceil(t(M).length/L)),O=h(()=>d().length),j=h(()=>m().length),Q=h(()=>t(j)>0?t(O)/t(j)*100:0);function fe(a){let s=10;a.rating>=2700?s=500:a.rating>=2660?s=250:a.rating>=2655?s=50:a.rating>=2650&&(s=25);const f=d().filter(T=>T===a.id).length===1;let b=f?Math.floor(s*.25):s;const _=f?`⚠️ ÚLTIMA CARTA: Solo recibirás ${b} monedas (25% del valor). ¿Seguro que quieres vender a ${a.name}?`:`¿Vender a ${a.name} por ${b} monedas?`;confirm(_)&&(le.removeCard(a.id),Fe.addCoins(b),Ve.success(`Vendido ${a.name} por ${b} monedas.`))}var E=Ke();qe("1dle9it",a=>{je(()=>{Ee.title="Colección - Grandmaster Legends"})});var I=l(E),R=n(l(I),2),V=l(R),W=l(V),K=l(W),U=n(K),ue=l(U);r(U),r(W),te(2),r(V);var q=n(V,2),me=l(q);r(q);var X=n(q,2),xe=l(X);r(X),r(R),r(I);var A=n(I,2),B=l(A);oe(B);var Y=n(B,2),F=l(Y),Z=l(F);oe(Z),te(),r(F);var be=n(F,2);{var _e=a=>{var s=Je(),v=l(s);v.__click=()=>re(c,-1);var f=n(v,2),b=l(f);r(f);var _=n(f,2);_.__click=()=>re(c),r(s),G(()=>{v.disabled=t(c)===1,$(b,`${t(c)??""} / ${t(S)??""}`),_.disabled=t(c)===t(S)}),p(a,s)};P(be,a=>{t(S)>1&&a(_e)})}r(Y),r(A);var ee=n(A,2);{var ge=a=>{var s=Ne();p(a,s)},pe=a=>{var s=Re();Ie(s,21,()=>t(ve),v=>v.id,(v,f)=>{const b=h(()=>d().includes(t(f).id));var _=Qe(),T=l(_);{var we=w=>{De(w,{get player(){return t(f)},onClick:()=>fe(t(f))})},$e=w=>{var D=Oe(),ae=n(l(D),2),ke=l(ae,!0);r(ae),r(D),G(()=>$(ke,t(f).name)),p(w,D)};P(T,w=>{t(b)?w(we):w($e,!1)})}r(_),p(v,_)}),r(s),p(a,s)};P(ee,a=>{u()?a(ge):a(pe,!1)})}var he=n(ee,2);{var ye=a=>{var s=We();p(a,s)};P(he,a=>{t(M).length===0&&a(ye)})}r(E),G(a=>{$(K,`${t(O)??""} `),$(ue,`/ ${t(j)??""}`),Te(me,`width: ${t(Q)??""}%`),$(xe,`${a??""}%`)},[()=>t(Q).toFixed(1)]),ze(B,()=>t(g),a=>se(g,a)),He(Z,()=>t(x),a=>se(x,a)),p(e,E),Se(),C()}Ce(["click"]);export{ra as component};
