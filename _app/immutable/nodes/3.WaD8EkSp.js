import{d as tr,c as Ue,a as I,f as B,s as D,e as Ve,t as Ze}from"../chunks/BmlTaktn.js";import{i as He}from"../chunks/BvzoVUxM.js";import{z as Je,w as ar,e as Ge,as as nr,i as or,aC as sr,aD as ir,A as Ne,B as lr,p as Qe,g as We,h as Ke,a as Xe,q as T,j as Ee,o as X,m as ve,c as h,s as w,f as x,r as f,k as i,t as de,$ as dr,aE as cr}from"../chunks/ChKhwW6z.js";import{i as G}from"../chunks/Su9L5ZLI.js";import{e as vr}from"../chunks/cp89KXi_.js";import{h as ur}from"../chunks/L2braW-k.js";import{s as Be,r as fr}from"../chunks/Dxec992p.js";import{a as hr,M as pr,s as De,t as Re}from"../chunks/BP6PtCVq.js";import{b as mr}from"../chunks/CZFNCg2L.js";import{s as Ye,a as Ce}from"../chunks/DAfpwKJz.js";import{a as Se,u as er,c as gr,p as br}from"../chunks/BGqSlqhw.js";import{c as xr}from"../chunks/Dc_oSVic.js";import{p as ze}from"../chunks/Dy_3LShZ.js";function _r(p,m,$,O){var A=p.__style;if(Je||A!==m){var k=hr(m);(!Je||k!==p.getAttribute("style"))&&(k==null?p.removeAttribute("style"):p.style.cssText=k),p.__style=m}return O}function rr(p,m,$=!1){if(p.multiple){if(m==null)return;if(!or(m))return sr();for(var O of p.options)O.selected=m.includes($e(O));return}for(O of p.options){var A=$e(O);if(ir(A,m)){O.selected=!0;return}}(!$||m!==void 0)&&(p.selectedIndex=-1)}function yr(p){var m=new MutationObserver(()=>{rr(p,p.__value)});m.observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),nr(()=>{m.disconnect()})}function wr(p,m,$=m){var O=new WeakSet,A=!0;ar(p,"change",k=>{var j=k?"[selected]":":checked",z;if(p.multiple)z=[].map.call(p.querySelectorAll(j),$e);else{var Q=p.querySelector(j)??p.querySelector("option:not([disabled])");z=Q&&$e(Q)}$(z),Ne!==null&&O.add(Ne)}),Ge(()=>{var k=m();if(p===document.activeElement){var j=lr??Ne;if(O.has(j))return}if(rr(p,k,A),A&&k===void 0){var z=p.querySelector(":checked");z!==null&&(k=$e(z),$(k))}p.__value=k,A=!1}),yr(p)}function $e(p){return"__value"in p?p.__value:p.value}function Mr(p){return function(...m){var $=m[0];return $.stopPropagation(),p==null?void 0:p.apply(this,m)}}var qe={};(function p(m,$,O,A){var k=!!(m.Worker&&m.Blob&&m.Promise&&m.OffscreenCanvas&&m.OffscreenCanvasRenderingContext2D&&m.HTMLCanvasElement&&m.HTMLCanvasElement.prototype.transferControlToOffscreen&&m.URL&&m.URL.createObjectURL),j=typeof Path2D=="function"&&typeof DOMMatrix=="function",z=function(){if(!m.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var n=r.transferToImageBitmap();e.createPattern(n,"no-repeat")}catch{return!1}return!0}();function Q(){}function a(r){var e=$.exports.Promise,n=e!==void 0?e:m.Promise;return typeof n=="function"?new n(r):(r(Q,Q),null)}var U=function(r,e){return{transform:function(n){if(r)return n;if(e.has(n))return e.get(n);var o=new OffscreenCanvas(n.width,n.height),t=o.getContext("2d");return t.drawImage(n,0,0),e.set(n,o),o},clear:function(){e.clear()}}}(z,new Map),V=function(){var r=Math.floor(16.666666666666668),e,n,o={},t=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var d=Math.random();return o[d]=requestAnimationFrame(function s(u){t===u||t+r-1<u?(t=u,delete o[d],l()):o[d]=requestAnimationFrame(s)}),d},n=function(l){o[l]&&cancelAnimationFrame(o[l])}):(e=function(l){return setTimeout(l,r)},n=function(l){return clearTimeout(l)}),{frame:e,cancel:n}}(),Y=function(){var r,e,n={};function o(t){function l(d,s){t.postMessage({options:d||{},callback:s})}t.init=function(s){var u=s.transferControlToOffscreen();t.postMessage({canvas:u},[u])},t.fire=function(s,u,_){if(e)return l(s,null),e;var M=Math.random().toString(36).slice(2);return e=a(function(b){function P(E){E.data.callback===M&&(delete n[M],t.removeEventListener("message",P),e=null,U.clear(),_(),b())}t.addEventListener("message",P),l(s,M),n[M]=P.bind(null,{data:{callback:M}})}),e},t.reset=function(){t.postMessage({reset:!0});for(var s in n)n[s](),delete n[s]}}return function(){if(r)return r;if(!O&&k){var t=["var CONFETTI, SIZE = {}, module = {};","("+p.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([t])))}catch(l){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",l),null}o(r)}return r}}(),pe={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Fe(r,e){return e?e(r):r}function me(r){return r!=null}function C(r,e,n){return Fe(r&&me(r[e])?r[e]:pe[e],n)}function ee(r){return r<0?0:Math.floor(r)}function Oe(r,e){return Math.floor(Math.random()*(e-r))+r}function ce(r){return parseInt(r,16)}function ge(r){return r.map(ue)}function ue(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:ce(e.substring(0,2)),g:ce(e.substring(2,4)),b:ce(e.substring(4,6))}}function te(r){var e=C(r,"origin",Object);return e.x=C(e,"x",Number),e.y=C(e,"y",Number),e}function ae(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function ne(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function oe(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function se(r,e,n,o,t,l,d,s,u){r.save(),r.translate(e,n),r.rotate(l),r.scale(o,t),r.arc(0,0,1,d,s,u),r.restore()}function fe(r){var e=r.angle*(Math.PI/180),n=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function ke(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,o=e.x+e.random*e.tiltCos,t=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,d=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",r.beginPath(),j&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(F(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-o)*.1,Math.abs(d-t)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var s=Math.PI/10*e.wobble,u=Math.abs(l-o)*.1,_=Math.abs(d-t)*.1,M=e.shape.bitmap.width*e.scalar,b=e.shape.bitmap.height*e.scalar,P=new DOMMatrix([Math.cos(s)*u,Math.sin(s)*u,-Math.sin(s)*_,Math.cos(s)*_,e.x,e.y]);P.multiplySelf(new DOMMatrix(e.shape.matrix));var E=r.createPattern(U.transform(e.shape.bitmap),"no-repeat");E.setTransform(P),r.globalAlpha=1-n,r.fillStyle=E,r.fillRect(e.x-M/2,e.y-b/2,M,b),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(d-t)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):se(r,e.x,e.y,Math.abs(l-o)*e.ovalScalar,Math.abs(d-t)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var g=Math.PI/2*3,R=4*e.scalar,S=8*e.scalar,L=e.x,Z=e.y,W=5,N=Math.PI/W;W--;)L=e.x+Math.cos(g)*S,Z=e.y+Math.sin(g)*S,r.lineTo(L,Z),g+=N,L=e.x+Math.cos(g)*R,Z=e.y+Math.sin(g)*R,r.lineTo(L,Z),g+=N;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(t)),r.lineTo(Math.floor(l),Math.floor(d)),r.lineTo(Math.floor(o),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function be(r,e,n,o,t){var l=e.slice(),d=r.getContext("2d"),s,u,_=a(function(M){function b(){s=u=null,d.clearRect(0,0,o.width,o.height),U.clear(),t(),M()}function P(){O&&!(o.width===A.width&&o.height===A.height)&&(o.width=r.width=A.width,o.height=r.height=A.height),!o.width&&!o.height&&(n(r),o.width=r.width,o.height=r.height),d.clearRect(0,0,o.width,o.height),l=l.filter(function(E){return ke(d,E)}),l.length?s=V.frame(P):b()}s=V.frame(P),u=b});return{addFettis:function(M){return l=l.concat(M),_},canvas:r,promise:_,reset:function(){s&&V.cancel(s),u&&u()}}}function xe(r,e){var n=!r,o=!!C(e||{},"resize"),t=!1,l=C(e,"disableForReducedMotion",Boolean),d=k&&!!C(e||{},"useWorker"),s=d?Y():null,u=n?ae:ne,_=r&&s?!!r.__confetti_initialized:!1,M=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,b;function P(g,R,S){for(var L=C(g,"particleCount",ee),Z=C(g,"angle",Number),W=C(g,"spread",Number),N=C(g,"startVelocity",Number),Ie=C(g,"decay",Number),ye=C(g,"gravity",Number),we=C(g,"drift",Number),Me=C(g,"colors",ge),Te=C(g,"ticks",Number),J=C(g,"shapes"),v=C(g,"scalar"),y=!!C(g,"flat"),q=te(g),re=L,K=[],H=r.width*q.x,le=r.height*q.y;re--;)K.push(fe({x:H,y:le,angle:Z,spread:W,startVelocity:N,color:Me[re%Me.length],shape:J[Oe(0,J.length)],ticks:Te,decay:Ie,gravity:ye,drift:we,scalar:v,flat:y}));return b?b.addFettis(K):(b=be(r,K,u,R,S),b.promise)}function E(g){var R=l||C(g,"disableForReducedMotion",Boolean),S=C(g,"zIndex",Number);if(R&&M)return a(function(N){N()});n&&b?r=b.canvas:n&&!r&&(r=oe(S),document.body.appendChild(r)),o&&!_&&u(r);var L={width:r.width,height:r.height};s&&!_&&s.init(r),_=!0,s&&(r.__confetti_initialized=!0);function Z(){if(s){var N={getBoundingClientRect:function(){if(!n)return r.getBoundingClientRect()}};u(N),s.postMessage({resize:{width:N.width,height:N.height}});return}L.width=L.height=null}function W(){b=null,o&&(t=!1,m.removeEventListener("resize",Z)),n&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,_=!1)}return o&&!t&&(t=!0,m.addEventListener("resize",Z,!1)),s?s.fire(g,L,W):P(g,L,W)}return E.reset=function(){s&&s.reset(),b&&b.reset()},E}var ie;function c(){return ie||(ie=xe(null,{useWorker:!0,resize:!0})),ie}function F(r,e,n,o,t,l,d){var s=new Path2D(r),u=new Path2D;u.addPath(s,new DOMMatrix(e));var _=new Path2D;return _.addPath(u,new DOMMatrix([Math.cos(d)*t,Math.sin(d)*t,-Math.sin(d)*l,Math.cos(d)*l,n,o])),_}function he(r){if(!j)throw new Error("path confetti are not supported in this browser");var e,n;typeof r=="string"?e=r:(e=r.path,n=r.matrix);var o=new Path2D(e),t=document.createElement("canvas"),l=t.getContext("2d");if(!n){for(var d=1e3,s=d,u=d,_=0,M=0,b,P,E=0;E<d;E+=2)for(var g=0;g<d;g+=2)l.isPointInPath(o,E,g,"nonzero")&&(s=Math.min(s,E),u=Math.min(u,g),_=Math.max(_,E),M=Math.max(M,g));b=_-s,P=M-u;var R=10,S=Math.min(R/b,R/P);n=[S,0,0,S,-Math.round(b/2+s)*S,-Math.round(P/2+u)*S]}return{type:"path",path:e,matrix:n}}function _e(r){var e,n=1,o="#000000",t='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,n="scalar"in r?r.scalar:n,t="fontFamily"in r?r.fontFamily:t,o="color"in r?r.color:o);var l=10*n,d=""+l+"px "+t,s=new OffscreenCanvas(l,l),u=s.getContext("2d");u.font=d;var _=u.measureText(e),M=Math.ceil(_.actualBoundingBoxRight+_.actualBoundingBoxLeft),b=Math.ceil(_.actualBoundingBoxAscent+_.actualBoundingBoxDescent),P=2,E=_.actualBoundingBoxLeft+P,g=_.actualBoundingBoxAscent+P;M+=P+P,b+=P+P,s=new OffscreenCanvas(M,b),u=s.getContext("2d"),u.font=d,u.fillStyle=o,u.fillText(e,E,g);var R=1/n;return{type:"bitmap",bitmap:s.transferToImageBitmap(),matrix:[R,0,0,R,-M*R/2,-b*R/2]}}$.exports=function(){return c().apply(this,arguments)},$.exports.reset=function(){c().reset()},$.exports.create=xe,$.exports.shapeFromPath=he,$.exports.shapeFromText=_e})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),qe,!1);const Pr=qe.exports;qe.exports.create;var Cr=B('<div class="absolute -bottom-2 md:right-0 right-8 bg-amber-500 text-slate-900 font-bold px-2 py-0.5 rounded text-xs border border-white/20 shadow-lg"> </div>'),Fr=B('<p class="text-xs text-slate-500 mt-1 uppercase tracking-widest"> </p>'),kr=B('<span class="text-[9px] text-slate-600">(Est)</span>'),Ir=B('<span class="text-[9px] text-slate-600">(Est)</span>'),Tr=B('<div class="px-3 py-1 rounded bg-green-500/20 text-green-400 text-xs font-bold border border-green-500/30">EN PROPIEDAD</div>'),Er=B('<div class="text-xs text-green-400 font-medium">Puedes pagarlo</div>'),$r=B('<div class="text-xs text-red-400 font-medium"> </div>'),Or=B('<button class="flex-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 py-3 rounded-lg font-bold transition-all"> </button>'),Rr=B('<button class="flex-1 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white shadow-lg shadow-green-900/20 py-3 rounded-lg font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed">Fichar Jugador</button>'),Sr=B('<div class="space-y-6"><div class="flex flex-col items-center text-center"><div class="relative mb-4"><img class="w-32 h-32 rounded-full border-4 border-amber-500/20 shadow-2xl object-cover"/> <!> <div class="absolute -bottom-2 left-8 md:left-0 bg-slate-800 text-white font-mono text-xs px-2 py-0.5 rounded border border-white/10"> </div></div> <h3 class="text-2xl font-bold font-serif text-white"> </h3> <p class="text-slate-400 font-mono text-sm"> </p> <!></div> <div class="grid grid-cols-3 gap-2"><div class="bg-slate-800/50 p-3 rounded-lg border border-white/5 text-center flex flex-col items-center justify-center"><div class="text-2xl mb-1">‚ôüÔ∏è</div> <div class="text-[10px] text-slate-500 uppercase tracking-wider font-bold mb-1">Classic</div> <div> </div></div> <div class="bg-slate-800/50 p-3 rounded-lg border border-white/5 text-center flex flex-col items-center justify-center"><div class="text-2xl mb-1">üêá</div> <div class="text-[10px] text-slate-500 uppercase tracking-wider font-bold mb-1">Rapid</div> <div> </div> <!></div> <div class="bg-slate-800/50 p-3 rounded-lg border border-white/5 text-center flex flex-col items-center justify-center"><div class="text-2xl mb-1">‚ö°</div> <div class="text-[10px] text-slate-500 uppercase tracking-wider font-bold mb-1">Blitz</div> <div> </div> <!></div></div> <div class="bg-slate-900/50 p-4 rounded-xl border border-white/5 flex justify-between items-center"><div><div class="text-xs text-slate-400 uppercase tracking-wider mb-1">Valor de Mercado</div> <div class="text-3xl font-bold text-white font-mono"> </div></div> <div class="text-right"><!></div></div> <div class="flex gap-3"><!></div></div>');function Br(p,m){Qe(m,!1);const $=()=>Ce(Se,"$ownedPlayerIds",A),O=()=>Ce(er,"$user",A),[A,k]=Ye(),j=ve(),z=ve();let Q=ze(m,"isOpen",8,!1),a=ze(m,"player",8,null),U=ze(m,"onClose",8);const V=xr();function Y(ee){return`${(ee/1e6).toFixed(1)}M`}function pe(){a()&&(V("buy",a()),me(),U()())}function Fe(){a()&&(V("sell",a()),U()())}function me(){Pr({particleCount:100,spread:70,origin:{y:.6},colors:["#FFD700","#FFA500","#FFFFFF"]})}function C(ee){return ee>=2800?"text-purple-400":ee>=2700?"text-red-400":ee>=2600?"text-amber-400":"text-green-400"}We(()=>(T(a()),$()),()=>{X(j,a()?$().includes(a().id):!1)}),We(()=>(T(a()),O()),()=>{X(z,a()?O().budget>=a().price:!1)}),Ke(),He(),pr(p,{get isOpen(){return Q()},title:"Ficha de Jugador",get onClose(){return U()},children:(ee,Oe)=>{var ce=Ue(),ge=Ee(ce);{var ue=te=>{var ae=Sr(),ne=h(ae),oe=h(ne),se=h(oe),fe=w(se,2);{var ke=v=>{var y=Cr(),q=h(y,!0);f(y),de(()=>D(q,(T(a()),x(()=>a().title)))),I(v,y)};G(fe,v=>{T(a()),x(()=>a().title)&&v(ke)})}var be=w(fe,2),xe=h(be);f(be),f(oe);var ie=w(oe,2),c=h(ie,!0);f(ie);var F=w(ie,2),he=h(F);f(F);var _e=w(F,2);{var r=v=>{var y=Fr(),q=h(y,!0);f(y),de(()=>D(q,(T(a()),x(()=>a().country)))),I(v,y)};G(_e,v=>{T(a()),x(()=>a().country)&&v(r)})}f(ne);var e=w(ne,2),n=h(e),o=w(h(n),4),t=h(o,!0);f(o),f(n);var l=w(n,2),d=w(h(l),4),s=h(d,!0);f(d);var u=w(d,2);{var _=v=>{var y=kr();I(v,y)};G(u,v=>{T(a()),x(()=>!a().ratingRapid)&&v(_)})}f(l);var M=w(l,2),b=w(h(M),4),P=h(b,!0);f(b);var E=w(b,2);{var g=v=>{var y=Ir();I(v,y)};G(E,v=>{T(a()),x(()=>!a().ratingBlitz)&&v(g)})}f(M),f(e);var R=w(e,2),S=h(R),L=w(h(S),2),Z=h(L,!0);f(L),f(S);var W=w(S,2),N=h(W);{var Ie=v=>{var y=Tr();I(v,y)},ye=v=>{var y=Ue(),q=Ee(y);{var re=H=>{var le=Er();I(H,le)},K=H=>{var le=$r(),Ae=h(le);f(le),de(Le=>D(Ae,`Insuficiente (-${Le??""})`),[()=>(T(a()),O(),x(()=>Y(a().price-O().budget)))]),I(H,le)};G(q,H=>{i(z)?H(re):H(K,!1)},!0)}I(v,y)};G(N,v=>{i(j)?v(Ie):v(ye,!1)})}f(W),f(R);var we=w(R,2),Me=h(we);{var Te=v=>{var y=Or();y.__click=Fe;var q=h(y);f(y),de(re=>D(q,`Vender (${re??""})`),[()=>(T(a()),x(()=>Y(a().price*.8)))]),I(v,y)},J=v=>{var y=Rr();y.__click=pe,de(()=>y.disabled=!i(z)),I(v,y)};G(Me,v=>{i(j)?v(Te):v(J,!1)})}f(we),f(ae),de((v,y,q,re)=>{Be(se,"src",(T(a()),x(()=>a().photoUrl||`https://ui-avatars.com/api/?name=${a().name}&background=random`))),Be(se,"alt",(T(a()),x(()=>a().name))),D(xe,`Rank #${T(a()),x(()=>a().position)??""}`),D(c,(T(a()),x(()=>a().name))),D(he,`@${T(a()),x(()=>a().username)??""}`),De(o,1,v),D(t,(T(a()),x(()=>a().rating))),De(d,1,y),D(s,(T(a()),x(()=>a().ratingRapid||"-"))),De(b,1,q),D(P,(T(a()),x(()=>a().ratingBlitz||"-"))),D(Z,re)},[()=>(T(a()),x(()=>`text-lg font-bold font-mono ${C(a().rating)}`)),()=>(T(a()),x(()=>`text-lg font-bold font-mono ${C(a().ratingRapid||a().rating-100)}`)),()=>(T(a()),x(()=>`text-lg font-bold font-mono ${C(a().ratingBlitz||a().rating+50)}`)),()=>(T(a()),x(()=>Y(a().price)))]),I(te,ae)};G(ge,te=>{a()&&te(ue)})}I(ee,ce)},$$slots:{default:!0}}),Xe(),k()}tr(["click"]);var Ar=B('<div class="text-center py-20"><div class="text-6xl mb-6 mx-auto w-fit animate-pulse text-primary">‚ôî</div> <p class="text-slate-400 text-lg">Cargando jugadores desde Lichess...</p></div>'),Lr=B('<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-success/20 text-success border border-success/30">‚úì Fichado</span>'),jr=B('<span class="animate-spin inline-block">‚Üª</span>'),Nr=B('<button class="btn-primary text-xs px-4 py-1.5 min-w-[90px] shadow-lg shadow-green-900/20"><!></button>'),Dr=B('<tr class="hover:bg-white/5 transition-colors group cursor-pointer"><td class="px-4 py-3 text-sm text-slate-500 font-mono"> </td><td class="px-4 py-3"><div class="flex items-center gap-3"><img class="w-10 h-10 rounded-full object-cover border border-white/10 group-hover:border-primary/50 transition-colors" loading="lazy"/> <div><div class="font-medium text-white group-hover:text-primary transition-colors"> </div> <div class="text-xs text-slate-500"> </div></div></div></td><td class="px-4 py-3"><span class="font-mono font-bold text-slate-300 bg-slate-800/50 px-2 py-1 rounded text-xs"> </span></td><td class="px-4 py-3"><span class="font-bold"> </span></td><td class="px-4 py-3 text-right"><!></td></tr>'),zr=B('<div class="text-center py-20"><p class="text-slate-500">No se encontraron jugadores</p></div>'),Ur=B('<div class="card overflow-hidden"><table class="w-full"><thead class="bg-slate-900/50 border-b border-white/5"><tr><th class="px-4 py-4 text-left text-xs font-bold uppercase tracking-wider text-slate-400">#</th><th class="px-4 py-4 text-left text-xs font-bold uppercase tracking-wider text-slate-400">Jugador</th><th class="px-4 py-4 text-left text-xs font-bold uppercase tracking-wider text-slate-400">Rating</th><th class="px-4 py-4 text-left text-xs font-bold uppercase tracking-wider text-slate-400">Precio</th><th class="px-4 py-4 text-right text-xs font-bold uppercase tracking-wider text-slate-400">Acci√≥n</th></tr></thead><tbody class="divide-y divide-white/5"></tbody></table></div> <!>',1),Wr=B('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-white mb-2">Mercado de Jugadores</h1> <p class="text-sm text-slate-400">Ficha a jugadores del top 500 de ajedrez cl√°sico de Lichess</p></div> <div class="flex gap-4"><input type="text" placeholder="Buscar jugador..." class="input flex-1"/> <select class="input w-48 cursor-pointer"><option>Por Ranking</option><option>Por Precio</option><option>Por Nombre</option></select></div> <!></div> <!>',1);function at(p,m){Qe(m,!1);const $=()=>Ce(gr,"$availablePlayers",j),O=()=>Ce(Se,"$ownedPlayerIds",j),A=()=>Ce(br,"$playersLoading",j),k=()=>Ce(er,"$user",j),[j,z]=Ye(),Q=ve();let a=ve(""),U=ve("position"),V=ve(null),Y=ve(!1),pe=ve(null);function Fe(c){return O().includes(c)}function me(c){X(V,c.id),X(Y,!1);const F=Se.buyPlayer(c.id,c.price);F.success?Re.success(F.message):Re.error(F.message),X(V,null)}function C(c){const F=Se.sellPlayer(c.id);F.success?Re.success(F.message):Re.error(F.message)}function ee(c){X(pe,c),X(Y,!0)}function Oe(c){return`${(c/1e6).toFixed(0)}M`}function ce(c,F){return c>F?"rgb(239, 83, 80)":c>F*.7?"rgb(255, 183, 77)":"rgb(102, 187, 106)"}We(()=>($(),i(a),i(U)),()=>{X(Q,$().filter(c=>c.name.toLowerCase().includes(i(a).toLowerCase())||c.username.toLowerCase().includes(i(a).toLowerCase())).sort((c,F)=>i(U)==="position"?c.position-F.position:i(U)==="price"?F.price-c.price:c.name.localeCompare(F.name)))}),Ke(),He();var ge=Wr();ur("gzmktl",c=>{Ge(()=>{dr.title="Mercado - Grandmaster Fantasy"})});var ue=Ee(ge),te=w(h(ue),2),ae=h(te);fr(ae);var ne=w(ae,2);de(()=>{i(U),cr(()=>{})});var oe=h(ne);oe.value=oe.__value="position";var se=w(oe);se.value=se.__value="price";var fe=w(se);fe.value=fe.__value="name",f(ne),f(te);var ke=w(te,2);{var be=c=>{var F=Ar();I(c,F)},xe=c=>{var F=Ur(),he=Ee(F),_e=h(he),r=w(h(_e));vr(r,5,()=>i(Q),o=>o.id,(o,t)=>{var l=Dr(),d=h(l),s=h(d,!0);f(d);var u=w(d),_=h(u),M=h(_),b=w(M,2),P=h(b),E=h(P,!0);f(P);var g=w(P,2),R=h(g);f(g),f(b),f(_),f(u);var S=w(u),L=h(S),Z=h(L,!0);f(L),f(S);var W=w(S),N=h(W),Ie=h(N,!0);f(N),f(W);var ye=w(W),we=h(ye);{var Me=J=>{var v=Lr();I(J,v)},Te=J=>{var v=Nr(),y=h(v);{var q=K=>{var H=jr();I(K,H)},re=K=>{var H=Ue(),le=Ee(H);{var Ae=Pe=>{var je=Ze("Sin saldo");I(Pe,je)},Le=Pe=>{var je=Ze("Fichar");I(Pe,je)};G(le,Pe=>{k(),i(t),x(()=>k().budget<i(t).price)?Pe(Ae):Pe(Le,!1)},!0)}I(K,H)};G(y,K=>{i(V),i(t),x(()=>i(V)===i(t).id)?K(q):K(re,!1)})}f(v),de(()=>v.disabled=(i(V),i(t),k(),x(()=>i(V)===i(t).id||k().budget<i(t).price))),Ve("click",v,Mr(()=>me(i(t)))),I(J,v)};G(we,J=>{i(t),x(()=>Fe(i(t).id))?J(Me):J(Te,!1)})}f(ye),f(l),de((J,v)=>{D(s,(i(t),x(()=>i(t).position))),Be(M,"src",(i(t),x(()=>i(t).photoUrl||`https://ui-avatars.com/api/?name=${i(t).name}&background=random`))),Be(M,"alt",(i(t),x(()=>i(t).name))),D(E,(i(t),x(()=>i(t).name))),D(R,`@${i(t),x(()=>i(t).username)??""}`),D(Z,(i(t),x(()=>i(t).rating))),_r(N,`color: ${J??""}`),D(Ie,v)},[()=>(i(t),k(),x(()=>ce(i(t).price,k().budget))),()=>(i(t),x(()=>Oe(i(t).price)))]),Ve("click",l,()=>ee(i(t))),I(o,l)}),f(r),f(_e),f(he);var e=w(he,2);{var n=o=>{var t=zr();I(o,t)};G(e,o=>{i(Q),x(()=>i(Q).length===0)&&o(n)})}I(c,F)};G(ke,c=>{A()?c(be):c(xe,!1)})}f(ue);var ie=w(ue,2);Br(ie,{get player(){return i(pe)},onClose:()=>X(Y,!1),get isOpen(){return i(Y)},set isOpen(c){X(Y,c)},$$events:{buy:c=>me(c.detail),sell:c=>C(c.detail)},$$legacy:!0}),mr(ae,()=>i(a),c=>X(a,c)),wr(ne,()=>i(U),c=>X(U,c)),I(p,ge),Xe(),z()}export{at as component};
